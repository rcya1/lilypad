<!DOCTYPE html><html><head>
      <title>temporary</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script
  src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"
  crossorigin="anonymous"
></script>
<style>
body {
  font-family: 'Open Sans', sans-serif;
  width: 100%;
  height: 100%;
  top: 0;
  margin: 0;
  padding: 2em calc(max(50% - 457px + 2em, 1em));
  position: relative;
  font-size: 16px;
  line-height: 1.6;
  background-color: #fff;
  overflow: initial;
  box-sizing: border-box;
  word-wrap: break-word;
  color: black;
  background-color: white;
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
}
body > :first-child {
  margin-top: 0;
}
body h1,
body h2,
body h3,
body h4,
body h5,
body h6 {
  color: black;
  padding-bottom: 8px;
  border-bottom: 1px solid black;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 16px;
  line-height: 1.2;
}
body h1 {
  font-size: 2.25em;
  padding-bottom: 0.3em;
}
body h2 {
  font-size: 1.75em;
  padding-bottom: 0.3em;
}
body h3 {
  font-size: 1.5em;
}
body h4 {
  font-size: 1.25em;
}
body h5 {
  font-size: 1.1em;
}
body h6 {
  font-size: 1em;
}
body p + ul {
  margin-top: -15px;
}
body a:not([href]) {
  color: inherit;
  text-decoration: none;
}
body a {
  color: #08c;
  text-decoration: none;
}
body a:hover {
  color: #00a3f5;
  text-decoration: none;
}
body > p {
  margin-top: 0;
  margin-bottom: 16px;
  word-wrap: break-word;
}
body > ol,
body > ul {
  margin-bottom: 16px;
}
body ol,
body ul {
  padding-left: 2em;
}
body ol ol,
body ol ul,
body ul ol,
body ul ul {
  margin-top: 0;
  margin-bottom: 0;
}
body li {
  margin-bottom: 0;
}
body li > p {
  margin-top: 0;
  margin-bottom: 0;
}
body code {
  font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
  font-size: 1em;
  padding: 0.15em 0.25em;
  margin: 0;
  white-space: break-spaces;
  background-color: #afb8c133;
  border-radius: 6px;
  color: #000000;
}
body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  color: #1f2328;
  background-color: #e3e6e9;
  border-radius: 6px;
}
body pre > code {
  padding: 0;
  margin: 0;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}
body hr {
  height: 1px;
  margin: 8px 0;
  background-color: #000000;
  border: 0 none;
}
body table {
  margin: 10px 0 15px 0;
  border-collapse: collapse;
  border-spacing: 0;
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}
body table th {
  font-weight: 700;
  color: #000;
}
body table td,
body table th {
  border: 1px solid #d6d6d6;
  padding: 6px 13px;
}
body dl {
  padding: 0;
}
body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: 700;
}
body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}
body ul {
  list-style: disc;
}
body ul ul {
  list-style: circle;
}
body ul ul ul {
  list-style: square;
}
body own-preview ol {
  list-style: decimal;
}
body own-preview ol ol,
body ul ol {
  list-style-type: lower-roman;
}
body own-preview ol ol ol,
body own-preview ol ul ol,
body ul ol ol,
body ul ul ol {
  list-style-type: lower-alpha;
}
body img {
  width: 100%;
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 25px;
}
body .image-caption {
  font-size: 0.8em;
  color: #494949;
  text-align: center;
  margin: -20px auto 10px;
  width: 100%;
}
body .definition {
  border-color: #06c406;
}
body .definition .title {
  background-color: #d9ffd9;
}
body .info {
  border-color: #448aff;
}
body .info .title {
  background-color: #ecf3ff;
}
body .proposition {
  border-color: #448aff;
}
body .proposition .title {
  background-color: #ecf3ff;
}
.admonition {
  border: 1px solid;
  border-radius: 8px;
  margin-bottom: 10px;
}
.admonition .title {
  font-size: 1.125em;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 8px 8px 0px 0px;
}
.admonition .title svg {
  margin-right: 4px;
}
.admonition .title p {
  margin: 0px;
}
.admonition .body {
  padding: 8px 10px 0px;
}
.admonition .body > :first-child {
  margin-top: 0;
}
.admonition .body > :last-child {
  margin-bottom: 4px;
}
</style>
</head>
<body><h2>Anonymity</h2>
<ul>
<li>So far: just talked about encryption</li>
<li>We leak:<ul>
<li>Our IP</li>
<li>Timing of our messages</li>
<li>Sizes of our message</li>
</ul>
</li>
<li>Idea: use a relay / VPN<ul>
<li>A big fan in and fan out</li>
<li>Idea is to make it impossible to figure out which input corresponds to which output</li>
<li>Need to create a TLS connection between server and client that is encrypted to ensure relay</li>
</ul>
</li>
<li>Problems:<ul>
<li>A compromised relay gets access to everything</li>
<li>Performance</li>
<li>Timing analysis still works</li>
</ul>
</li>
</ul>
<h3>Onion Routing</h3>
<ul>
<li>We use a path of relays</li>
<li>Each relay only knows what sent it to them and where it is going to send it</li>
<li>Cannot just make a single encrypted connection between each client / relay and relay / relay because then the relay is seeing unencrypted data</li>
<li>Let&#39;s say we have a path of three relays:<ul>
<li>C - R1 - R2 - R3 - S</li>
<li>C - R1 sets up a TLS connection</li>
<li>Using this TLS connection, we set up another TLS connection between C and R2 that goes through R1<ul>
<li>Nested within the C - R1 connection</li>
<li>We continue nesting connections within each other</li>
</ul>
</li>
</ul>
</li>
<li>TOR typically uses a circuit of three relays</li>
</ul>
<h3>Directory</h3>
<ul>
<li>We want all clients to use the same directory / database of relays<ul>
<li>An attack could be to give different clients different sets of relays and use that as an attack</li>
</ul>
</li>
<li>To mitigate this, TOR uses a bunch of directory servers that each sign the directory</li>
</ul>
<h3>TOR Browser</h3>
<ul>
<li>Tor browser does more than just use the network</li>
<li>Trying to limit the amount of unique information leaked<ul>
<li>Chrome exopses a lot of information like screen size / your graphics card which can build a unique fingerprint of your machine</li>
<li>TOR browser tries to do stuff to make your browser look like everyone else&#39;s</li>
</ul>
</li>
</ul>
<h3>Bridges</h3>
<ul>
<li>Bridge = hidden relays</li>
<li>Used to combat firewalls that are used for censorship<ul>
<li>You ask a BridgeDB for a bridge relay</li>
<li>Rate limited</li>
<li>Competent firewall operators can try to block this<ul>
<li>But if you host the BridgeDB on some CDN like Cloudflare then the operator might have to block all of Cloudflare</li>
</ul>
</li>
<li>Current version of TCP still leaks the website that you are connecting to so good firewall operators (i.e. China) can still block it</li>
</ul>
</li>
</ul>
<h3>Anonymous Servers</h3>
<ul>
<li>So far we have talked about clients being anonymous</li>
<li>Instead servers want to be anonymous<ul>
<li>I.e. whistleblowing or illegal websites</li>
<li>Also DOS resistant</li>
</ul>
</li>
<li>Servers choose some relay point to be a &quot;introduction point&quot; / &quot;mailbox&quot;<ul>
<li>Builds a circuit to that intro point</li>
</ul>
</li>
<li>Client chooses some relay as the rendezvous point<ul>
<li>They then build another circuit to the introduction point and sent the name of the rendezvouz point to the server through it<ul>
<li>It can also send information like a username to try to convince the server to accept the connection</li>
</ul>
</li>
<li>The server, if it chooses to accept the connection, will connect to the Rendezvout point</li>
</ul>
</li>
<li>Clever idea:<ul>
<li>The name of the onion link will just be the public key</li>
<li>This is important because:<ul>
<li>We don&#39;t need a common directory to store this because the server can just sign messages with its private key and the client will see that this is legit</li>
<li>It also allows you to encrypt messages to the server with the public key because no TLS CA is going to issue a certificate to the server</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Guard Nodes</h3>
<ul>
<li>If we have a path of three nodes but the ends are both compromised (R1 and R3)<ul>
<li>Can do sophisticated timing attacks by comparing the times</li>
<li>Can bypass an honest node</li>
<li>As more and more circuits are built by you, the probability increases to 1 that there will be a compromised circuit</li>
</ul>
</li>
<li>Guard note idea:<ul>
<li>Choose and keep first node</li>
<li>Only change the second and third node each time<ul>
<li>You have a chance of getting screwed the first time but your probability won&#39;t approach 1 over your lifetime</li>
</ul>
</li>
</ul>
</li>
</ul>
</body></html>